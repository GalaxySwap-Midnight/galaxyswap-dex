[build]
  base = "."
  publish = "apps/lunarswap-ui/.next"
  command = """
  set -euo pipefail
  corepack enable
  corepack prepare pnpm@10.4.1 --activate
  chmod +x scripts/build.sh
  ./scripts/build.sh
  """
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF"

[build.environment]
  NODE_VERSION = "22"
  PNPM_VERSION = "10.4.1"
  NPM_FLAGS = "--version"  # This prevents Netlify from auto-installing
  NETLIFY_USE_PNPM = "false"  # Disable auto-detection

[[redirects]]
  from = "/lunarswap/*"
  to = "https://lunarswap.netlify.app/:splat"
  status = 200
  force = true
  
