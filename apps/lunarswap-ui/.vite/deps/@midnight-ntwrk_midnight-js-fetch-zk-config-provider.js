import __buffer_polyfill from 'vite-plugin-node-polyfills/shims/buffer'
globalThis.Buffer = globalThis.Buffer || __buffer_polyfill
import __global_polyfill from 'vite-plugin-node-polyfills/shims/global'
globalThis.global = globalThis.global || __global_polyfill
import __process_polyfill from 'vite-plugin-node-polyfills/shims/process'
globalThis.process = globalThis.process || __process_polyfill

import {
  require_browser_ponyfill
} from "./chunk-QFZAAM7U.js";
import {
  InvalidProtocolSchemeError,
  ZKConfigProvider,
  createProverKey,
  createVerifierKey,
  createZKIR
} from "./chunk-LUSGBNOB.js";
import "./chunk-DCR4CYXC.js";
import "./chunk-OCNPWTNL.js";
import "./chunk-WGYX3V4F.js";
import {
  __toESM,
  require_dist,
  require_dist2,
  require_dist3
} from "./chunk-YEDOAZYA.js";

// ../../node_modules/.pnpm/@midnight-ntwrk+midnight-js-fetch-zk-config-provider@2.0.2/node_modules/@midnight-ntwrk/midnight-js-fetch-zk-config-provider/dist/index.mjs
var import_dist = __toESM(require_dist(), 1);
var import_dist2 = __toESM(require_dist2(), 1);
var import_dist3 = __toESM(require_dist3(), 1);
var import_cross_fetch = __toESM(require_browser_ponyfill(), 1);
var KEY_PATH = "keys";
var PROVER_EXT = ".prover";
var VERIFIER_EXT = ".verifier";
var ZKIR_PATH = "zkir";
var ZKIR_EXT = ".bzkir";
var FetchZkConfigProvider = class extends ZKConfigProvider {
  baseURL;
  fetchFunc;
  /**
   * @param baseURL The endpoint to query for ZK artifacts.
   * @param fetchFunc The function to use to execute queries.
   */
  constructor(baseURL, fetchFunc = import_cross_fetch.fetch) {
    super();
    this.baseURL = baseURL;
    this.fetchFunc = fetchFunc;
    const urlObject = new URL(baseURL);
    if (urlObject.protocol !== "http:" && urlObject.protocol !== "https:") {
      throw new InvalidProtocolSchemeError(urlObject.protocol, ["http:", "https:"]);
    }
  }
  async sendRequest(url, circuitId, ext, responseType) {
    const response = await this.fetchFunc(`${this.baseURL}/${url}/${circuitId}${ext}`, {
      method: "GET"
    });
    if (response.ok) {
      return responseType === "text" ? await response.text() : await response.arrayBuffer().then((arrayBuffer) => new Uint8Array(arrayBuffer));
    }
    throw new Error(response.statusText);
  }
  getProverKey(circuitId) {
    return this.sendRequest(KEY_PATH, circuitId, PROVER_EXT, "arraybuffer").then(createProverKey);
  }
  getVerifierKey(circuitId) {
    return this.sendRequest(KEY_PATH, circuitId, VERIFIER_EXT, "arraybuffer").then(createVerifierKey);
  }
  getZKIR(circuitId) {
    return this.sendRequest(ZKIR_PATH, circuitId, ZKIR_EXT, "arraybuffer").then(createZKIR);
  }
};
export {
  FetchZkConfigProvider
};
//# sourceMappingURL=@midnight-ntwrk_midnight-js-fetch-zk-config-provider.js.map
